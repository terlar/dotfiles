#!/usr/bin/env bash
set -eu
set -o pipefail

gen_private_keys() {
	sshcontrol describe
}

main() {
	if [[ -z "$@" ]]
	then
		echo cancel; gen_private_keys
	else
		case "${1}" in
			*cancel*)
				true
				;;
			*)
				local key
				key="$(echo "$1" | cut -d' ' -f2)"
				sshcontrol toggle "${key}" >/dev/null
				;;
		esac
	fi
}

main "$@"
