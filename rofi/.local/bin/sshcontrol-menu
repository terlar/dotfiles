#!/usr/bin/env bash
set -eu
set -o pipefail

gen_entries() {
	echo c cancel
	sshcontrol describe
}

main() {
	local prompt='toggle ssh key'
	local sel

	# Call menu
	sel="$(gen_entries \
		| rofi -dmenu -p "${prompt}:" -a 0 -no-custom \
		| awk '{print $2}')"

	# Call command
	case "${sel}" in
		cancel) true;;
		*) sshcontrol toggle "${sel}";;
	esac
}

main "$@"
