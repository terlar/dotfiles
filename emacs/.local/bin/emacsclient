#!/usr/bin/env bash
[[ "${TRACE}" ]] && set -x
set -eu
set -o pipefail

is_graphical() {
	[ -n "${DISPLAY:-}" ]
}

is_interactive() {
	fd=0 # stdin
	[ -t "${fd}" ] || [ -p /dev/stdin ]
}

has_xdotool() {
	command -v xdotool >/dev/null 2>&1
}

main() {
	if is_interactive && is_graphical
	then
		has_xdotool && xdotool key 'Super+E'

		if [ "$#" -eq 0 ]
		then
			return
		fi
	fi

	exec /usr/bin/remacsclient "$@"
}

main "$@"
