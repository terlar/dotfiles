#!/usr/bin/env bash
[[ "${TRACE}" ]] && set -x
set -eu
set -o pipefail

has_cmd() {
	if command -v "$*" &>/dev/null
	then
		return 0
	else
		return 1
	fi
}

main() {
	local cmd cmd_path
	local shebang lexer
	cmd="${1?command was not provided}"

	if ! has_cmd "${cmd}"
	then
		echo "unknown command \`${cmd}'" 1>&2
	fi

	cmd_path="$(which "${cmd}")"
	shebang="$(grep -ro '^#!/.*' "${cmd_path}")"
	shebang="${shebang##*/}"
	lexer="${shebang##* }"
	pygmentize -l "${lexer}" "${cmd_path}"
}

main "$@"
